---
title: "2015-03-01-NaijiaLiu-Assignment2"
author: "Naijia Liu"
date: "2015-3-1"
output: html_document
---


Open the CSV file. Then, clean the dataset by creating a new file and droping the first row of the original file. (The 1st row of the original file doesn't contain any data.)
```{r}
file <- "/Users/NaijiaLiu/Downloads/nmis_dataset/lga/ebola/Microbe-scope-bugs.csv"
d <- read.csv(file, header=TRUE)
f <- d[2:41,]
```

Library useful packages for the graph. 
```{r}
library(ggplot2)
library(scales)
library(QMSS)
library(stringr)
```

Transform "case.fatality.rate" from a factor variable into character variable and delete all "%" sigh.  Later, it can be treated as numeric variable by ggplot function.
```{r}
dead <- as.character(f$case.fatality.rate)
dead <- str_replace_all(dead,"%","")
```

Transform "average.basic. reproductive.rate" from a factor variable into character. Later, it can be treated as numeric variable by ggplot function.
```{r}
contagion <-as.character(f$average.basic.reproductive.rate)
```


According to the sample graph, "airborn droplet" and "airborne" are coloured as one category. Thus, in variable "primary.mode.of.transmission", replace all the "airborne droplet" by "airborne"
```{r}
transmission <-str_replace_all(f$primary.mode.of.transmission, "airborne droplet", "airborne")
```

Create the graph by ggplot. Color the dots by transmission method. 
**Thoughout the process, 4 missing values are created due to the range of X axis (0,17), which is consistent with the sample graph.**

```{r, fig.width=14, fig.height=8}
p<-ggplot(data=f, aes(x=as.numeric(contagion), y=as.numeric(dead)/100, label=f$X, group =transmission, colour=transmission)) +geom_point(size=5)
print(p)
```

Label every dot and change the tick mark of x and y axis according to the sample graph. Add a horizontal line at y=1%.
```{r,fig.width=15, fig.height=9}
p <-p +geom_text(hjust=0,vjust=0,size=3) +scale_y_continuous(labels=percent,breaks=c(0,0.0001, 0.01,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1)) +scale_x_continuous(limits=c(0, 20), breaks=0:17, expand=c(0,0)) +geom_hline(yintercept=0.01) 
print(p)
```

Add all the background facid according to the sample graph by "geom_segment" and "geom_vline". 
```{r, fig.width=15, fig.height=9}
p <- p+geom_segment(aes(x= 0, y = 0.2, xend = 17, yend = 0.2, alpha=0.7)) +geom_segment(aes(x= 0, y = 0.5, xend = 17, yend = 0.5, alpha=0.7)) +geom_vline(xintercept=1) +geom_vline(xintercept=5,colour="grey",alpha=1) +geom_vline(xintercept=7,colour="grey",alpha=1) +geom_vline(xintercept=12,colour="grey", alpha=1) 
print(p)
```

Label x and y axis and create shaded area according to the sample graph.
```{r, fig.width=15, fig.height=9}
p <- p+xlab("Contagiousness") +ylab("Deadliness") +annotate("rect", xmin = 0, xmax = 17, ymin = 0.2, ymax = 0.5, alpha=0.1, fill="red") +annotate("rect", xmin = 0, xmax = 17, ymin = 0, ymax = 0.01,alpha = .2) 
print(p)
```

Add annotation to each categories and posit them accordingly. 
```{r, fig.width=15, fig.height=9}
p <- p + annotate("text", x = 0.5, y = 1.1, label = "not very", size=4, color="grey") +annotate("text", x = 3, y = 1.1, label = "quiet contagious", size=4, color="grey") +annotate("text", x = 6, y = 1.1, label = "very", size=4, color="grey")+annotate("text", x = 9.5, y = 1.1, label = "highly", size=4, color="grey") +annotate("text", x = 14.5, y = 1.1, label = "Vaccinate now", size=4, color="grey") +annotate("text", x = 18.5, y = 0.005, label = "not too deadly", size=4, color="grey") +annotate("text", x = 18.5, y = 0.105, label = "quiet deadly", size=4, color="grey")+annotate("text", x = 18.5, y = 0.35, label = "deadly", size=4, color="grey")+annotate("text", x = 18.5, y = 0.75, label = "extremely deadly", size=4, color="grey") 
print(p)
```

Change the background color into white and add the title of the graph. Change the color chart's name into "PRIMARY TRANSMISSION METHOD". 
```{r, fig.width=15, fig.height=9}
p <- p+theme_bw() +labs(title = "The Microbe-scope", size=7) +labs(colour = "PRIMARY TRANSMISSION METHOD", color=grey,size=3)
print(p)
```

**Thoughout the process, 4 missing values are created due to the range of X axis (0,17), which is consistent with the sample graph.**