---
title: "hw1"
author: "yl3174"
date: "Wednesday, February 04, 2015"
output: html_document
---

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
###################################
# R Basic Training Assignment
###################################
# 3 Produce a new data.frame with the following properties:
# From the NMIS Health Facilities Inventory, select all facilities located in the Southern zones of Nigeria.
# Incorporate LGA metadata into this new dataframe.
setwd("D:/Columbia/Subject/spring2015/4063-Data Visualization/hw1")
file <- "Health_Mopup_and_Baseline_NMIS_Facility.csv"
NMIS <- read.csv(file)  # read the .csv file
LGAS <- read.csv("lgas.csv")
test <- c("South")
LGAS_south <- subset(LGAS,grepl(paste(test, collapse= "|"),LGAS$zone))
LGAS_south2 <- LGAS_south$unique_lga
NMIS_south <- subset(NMIS, unique_lga %in% LGAS_south2)
NMIS_LGAS = merge(NMIS_south,LGAS, by = 'unique_lga')

# 4 Calculate the total number of full time nurses and doctors for all health facilities, by state.
totnum_nur_doc <- aggregate(as.numeric(NMIS_LGAS$num_nurses_fulltime)+as.numeric(NMIS_LGAS$num_doctors_fulltime), by=list(state = NMIS_LGAS$state),FUN=sum, na.rm = T )
# Compute per capita and per area values, as well.
state_subset =  NMIS_LGAS[!duplicated(NMIS_LGAS[,c('state')]),]
totnum_capita <- aggregate(as.numeric(state_subset$pop_2006), by=list(state = state_subset$state),FUN=sum, na.rm = T )
totnum_area <- aggregate(as.numeric(state_subset$area_sq_km), by=list(state = state_subset$state),FUN=sum, na.rm = T )
state_subset$nurdoc_capita <- (totnum_nur_doc$x)/(totnum_capita$x)
state_subset$nurdoc_area <- (totnum_nur_doc$x)/(totnum_area$x)
# Sort the resulting dataset by state population, in descending order.
sort_data <- state_subset[order(state_subset$pop_2006, decreasing=T),]
# Show the results!
sort_data
```
